<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Anexo: Dilatación Térmica Crítica</title>
    <style>
        body { font-family: 'Segoe UI', Arial, sans-serif; color: #333; max-width: 900px; margin: 0 auto; padding: 20px; background-color: #f4f4f4; }
        .container { background-color: white; padding: 30px; border-radius: 8px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); }
        h1 { color: #c0392b; border-bottom: 3px solid #c0392b; padding-bottom: 10px; }
        
        .simulator { background-color: #222; color: white; padding: 25px; border-radius: 10px; margin-top: 20px; box-shadow: inset 0 0 20px rgba(0,0,0,0.5); }
        
        .bar-container { margin: 20px 0; position: relative; }
        .bar-label { display: flex; justify-content: space-between; font-size: 0.9em; margin-bottom: 5px; color: #aaa; }
        .bar { height: 45px; border-radius: 4px; transition: width 0.1s linear; display: flex; align-items: center; padding-left: 10px; font-weight: bold; font-size: 0.85em; text-transform: uppercase; letter-spacing: 1px; }
        
        /* Colores y Tamaños Base */
        .piston { background: linear-gradient(90deg, #e74c3c, #c0392b); width: 80%; box-shadow: 0 0 10px rgba(231, 76, 60, 0.5); }
        .liner { background: linear-gradient(90deg, #95a5a6, #7f8c8d); width: 80.8%; border: 1px solid #555; opacity: 0.9; } 
        
        .controls { margin-top: 25px; background: rgba(255,255,255,0.05); padding: 15px; border-radius: 5px; }
        input[type=range] { width: 100%; cursor: pointer; margin: 15px 0; }
        
        .status-box { margin-top: 25px; padding: 20px; text-align: center; font-weight: bold; font-size: 1.2em; border-radius: 5px; text-transform: uppercase; border: 2px solid transparent; transition: all 0.3s ease; }
        
        /* Estados */
        .normal { background-color: #27ae60; color: white; border-color: #2ecc71; }
        .warning { background-color: #f39c12; color: black; border-color: #f1c40f; animation: pulse-slow 2s infinite; }
        .critical { background-color: #e74c3c; color: white; border-color: #c0392b; animation: shake 0.5s infinite; }
        .melted { background-color: #2c3e50; color: #e74c3c; border: 2px dashed #e74c3c; }

        @keyframes shake { 0% { transform: translate(1px, 1px) rotate(0deg); } 10% { transform: translate(-1px, -2px) rotate(-1deg); } 20% { transform: translate(-3px, 0px) rotate(1deg); } 30% { transform: translate(3px, 2px) rotate(0deg); } 40% { transform: translate(1px, -1px) rotate(1deg); } 50% { transform: translate(-1px, 2px) rotate(-1deg); } 60% { transform: translate(-3px, 1px) rotate(0deg); } 70% { transform: translate(3px, 1px) rotate(-1deg); } 80% { transform: translate(-1px, -1px) rotate(1deg); } 90% { transform: translate(1px, 2px) rotate(0deg); } 100% { transform: translate(1px, -2px) rotate(-1deg); } }
        @keyframes pulse-slow { 0% { opacity: 1; } 50% { opacity: 0.8; } 100% { opacity: 1; } }
    </style>
</head>
<body>

<div class="container">
    <h1>Anexo Técnico: Falla por Dilatación Térmica</h1>
    <p>Simulación del comportamiento metalúrgico del pistón (Aluminio) frente a la camisa (Acero) en condiciones de sobrecalentamiento. Se observa cómo el coeficiente de expansión térmica del aluminio (α ≈ 23µm/m°C) supera al del acero (α ≈ 12µm/m°C), eliminando la holgura operativa.</p>

    <div class="simulator">
        
        <div class="bar-container">
            <div class="bar-label">
                <span>DIÁMETRO CAMISA (ACERO)</span>
                <span id="val-liner">0.00 mm</span>
            </div>
            <div class="bar liner" id="bar-liner">CAMISA ESTATICA</div>
        </div>

        <div class="bar-container">
            <div class="bar-label">
                <span>DIÁMETRO PISTÓN (ALUMINIO)</span>
                <span id="val-piston">0.00 mm</span>
            </div>
            <div class="bar piston" id="bar-piston">PISTÓN EN EXPANSIÓN</div>
        </div>

        <div class="status-box normal" id="status-box">
            ESTADO: OPERACIÓN NORMAL
        </div>

        <div class="controls">
            <label style="font-size: 1.1em; color: #ddd;">Temperatura del Componente: <span id="temp-display" style="color: #3498db; font-weight: bold;">25</span> °C</label>
            <input type="range" id="temp-slider" min="25" max="700" value="25" step="5">
            <div style="display: flex; justify-content: space-between; font-size: 0.8em; color: #666;">
                <span>25°C (Ambiente)</span>
                <span>350°C (Riesgo)</span>
                <span>660°C (Fusión Al)</span>
            </div>
        </div>
    </div>
</div>

<script>
    const slider = document.getElementById('temp-slider');
    const tempDisplay = document.getElementById('temp-display');
    const barPiston = document.getElementById('bar-piston');
    const barLiner = document.getElementById('bar-liner');
    const statusBox = document.getElementById('status-box');

    // Configuración Física (Simulada para visualización)
    const basePiston = 80.0; // % ancho base
    const baseLiner = 80.8; // % ancho base (0.8% de holgura inicial)
    const alphaAl = 0.004; // Factor visual exagerado para Al
    const alphaFe = 0.0018; // Factor visual exagerado para Fe

    function updateSimulation() {
        let temp = parseInt(slider.value);
        tempDisplay.textContent = temp;
        
        // Color dinámico de temperatura
        let r = Math.min(255, (temp / 3));
        let b = Math.max(0, 255 - (temp / 2));
        tempDisplay.style.color = `rgb(${r}, 50, ${b})`;

        // Cálculo de expansión
        let deltaT = temp - 25; // Delta desde ambiente
        let widthPiston = basePiston + (deltaT * alphaAl);
        let widthLiner = baseLiner + (deltaT * alphaFe);

        // Actualizar gráfico
        barPiston.style.width = widthPiston + '%';
        barLiner.style.width = widthLiner + '%';

        // Lógica de Estados
        if (temp >= 650) {
            statusBox.innerHTML = "¡FALLA TOTAL! PUNTO DE FUSIÓN ALCANZADO (PISTÓN DERRITIDO)";
            statusBox.className = "status-box melted";
            barPiston.style.opacity = "0.5";
        } else if (widthPiston >= widthLiner + 0.2) {
            statusBox.innerHTML = "¡CRÍTICO! ATASCO SEVERO Y FRACTURA INMINENTE";
            statusBox.className = "status-box critical";
            barPiston.style.opacity = "1";
        } else if (widthPiston >= widthLiner - 0.1) {
            statusBox.innerHTML = "PELIGRO: PÉRDIDA TOTAL DE HOLGURA (FRICCIÓN EXTREMA)";
            statusBox.className = "status-box warning";
            barPiston.style.opacity = "1";
        } else {
            statusBox.innerHTML = "ESTADO: OPERACIÓN NORMAL (Holgura Segura)";
            statusBox.className = "status-box normal";
            barPiston.style.opacity = "1";
        }
    }

    slider.addEventListener('input', updateSimulation);
    updateSimulation();
</script>

</body>
</html>
